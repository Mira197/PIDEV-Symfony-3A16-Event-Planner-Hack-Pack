<div class="row">
    <div class="col-md-8 offset-md-2">
        {{ form_start(form,{'attr': {'novalidate': 'novalidate'}} ) }}
        <div class="input-style-1">
            {{ form_label(form.name) }}
            {{ form_widget(form.name, {'attr': {'placeholder': 'Location Name','class': form_errors(form.name) ? 'is-invalid' : ''}}) }}
            {% if form_errors(form.name) %}
                <div class="form-error">{{ form_errors(form.name) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.address) }}
            {{ form_widget(form.address, {'attr': {'placeholder': 'Address','class': form_errors(form.address) ? 'is-invalid' : ''}}) }}
            {% if form_errors(form.address) %}
                <div class="form-error">{{ form_errors(form.address) }}</div>
            {% endif %}
        </div>
        <div class="select-style-1">
            {{ form_label(form.city) }}
            <div class="select-position">
                {{ form_widget(form.city, {'attr': {'class': form_errors(form.city) ? 'is-invalid' : ''}}) }}
            </div>
            {% if form_errors(form.city) %}
                <div class="form-error">{{ form_errors(form.city) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.capacity) }}
            {{ form_widget(form.capacity, {'attr': {'placeholder': 'Capacity (Number of People)','class': form_errors(form.capacity) ? 'is-invalid' : ''}}) }}
            {% if form_errors(form.capacity) %}
                <div class="form-error">{{ form_errors(form.capacity) }}</div>
            {% endif %}
        </div>
        <div class="select-style-1">
            {{ form_label(form.status) }}
            <div class="select-position">
                {{ form_widget(form.status, {'attr': {'class': form_errors(form.status) ? 'is-invalid' : ''}}) }}
            </div>
            {% if form_errors(form.status) %}
                <div class="form-error">{{ form_errors(form.status) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.description) }}
            {{ form_widget(form.description, {'attr': {'placeholder': 'Location Description','class': form_errors(form.description) ? 'is-invalid' : ''}}) }}
           {% if form_errors(form.description) %}
                <div class="form-error">{{ form_errors(form.description) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.dimension) }}
            {{ form_widget(form.dimension, {'attr': {'placeholder': 'Dimension (eg: 20m x 30m)','class': form_errors(form.dimension) ? 'is-invalid' : ''}}) }}
            {% if form_errors(form.dimension) %}
                <div class="form-error">{{ form_errors(form.dimension) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.price) }}
            <div class="input-group">
                {{ form_widget(form.price, {'attr': {'placeholder': 'Price per day (DT)','class': form_errors(form.price) ? 'is-invalid' : ''}}) }}
                
            </div>
            {% if form_errors(form.price) %}
                <div class="form-error">{{ form_errors(form.price) }}</div>
            {% endif %}
        </div>
        <div class="input-style-1">
            {{ form_label(form.image) }}
            {# üî• Affichage de l'image actuelle #}
            {% if location.imageFilename is defined and location.imageFilename %}
                <div class="mb-2">
                    <img src="{{ asset('uploads/' ~ location.imageFilename) }}" alt="Current Image" class="img-fluid rounded" style="max-width: 300px;">
                </div>
             {% endif %}
            {{ form_widget(form.image, {'attr': {'class': form_errors(form.image) ? 'is-invalid' : ''}}) }}
            {% if form_errors(form.image) %}
                <div class="form-error">{{ form_errors(form.image) }}</div>
            {% endif %}
        </div> {# Le champ image ici est crucial ! #}

        <hr class="my-4" />
        <h5 class="mb-3">3D Tour Settings</h5>
        <div class="form-check form-switch toggle-switch mb-3">
            {{ form_widget(form.has_3d_tour, {'attr': {'class': 'form-check-input'}}) }}
            {{ form_label(form.has_3d_tour, null, {'label_attr': {'class': 'form-check-label'}}) }}
        </div>
        <div id="tour-3d-section">
            <div class="input-style-1">
                {{ form_label(form.table_set_count) }}
                {{ form_widget(form.table_set_count) }}
                {{ form_errors(form.table_set_count) }}
            </div>
            <div class="form-check checkbox-style mb-3">
                {{ form_widget(form.include_corner_plants) }}
                {{ form_label(form.include_corner_plants) }}
                {{ form_errors(form.include_corner_plants) }}
            </div>
            <div class="select-style-1">
                {{ form_label(form.window_style) }}
                <div class="select-position">
                    {{ form_widget(form.window_style) }}
                </div>
                {{ form_errors(form.window_style) }}
            </div>

            <div class="select-style-1">
                {{ form_label(form.door_style) }}
                <div class="select-position">
                    {{ form_widget(form.door_style) }}
                </div>
                {{ form_errors(form.door_style) }}
            </div>

            <div class="form-check checkbox-style mb-3">
                {{ form_widget(form.include_ceiling_lights) }}
                {{ form_label(form.include_ceiling_lights) }}
                {{ form_errors(form.include_ceiling_lights) }}
            </div>
            {{ form_row(form.light_color) }}
        </div>
            <button class="main-btn primary-btn-outline btn-hover px-4 py-2">Save </button>
        {{ form_end(form) }}
         {# ‚úÖ Script plac√© ici pour agir sur les champs d√©j√† affich√©s #}
        <script>
            document.addEventListener('DOMContentLoaded', function () {
            const toggle3D = document.querySelector('#location_has_3d_tour');
            const tourSection = document.getElementById('tour-3d-section');

            function update3DVisibility() {
                if (toggle3D.checked) {
                     tourSection.style.display = '';
                } else {
                tourSection.style.display = 'none';
                }
            }

            if (toggle3D && tourSection) {
                toggle3D.addEventListener('change', update3DVisibility);
                update3DVisibility(); // Initial state
            }   
            });
        </script>
<style>
    .input-style-1,
    .select-style-1,
    .form-check {
        margin-bottom: 10px !important; /* r√©duit l‚Äôespace entre les champs */
    }
    /* Tu peux aussi jouer sur la taille des labels */
    .input-style-1 label,
    .select-style-1 label {
        font-size: 14px;
        margin-bottom: 3px;
    }

    .form-check label {
        margin-left: 6px;
    }

    /*style for form validation error messages*/
.form-error {
    color: #dc3545; /* rouge doux */
    font-size: 14px;
    margin-top: 4px;
    padding-left: 2px;
    font-style: italic;
}
.is-invalid {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
}



</style>


    </div>
</div>
