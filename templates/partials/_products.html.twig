{% for category, products in groupedProducts %}
    <div class="col-12 mt-5 mb-3">
        <h2 class="text-center">{{ category }}</h2>
    </div>
    <div class="row">
        {% for product in products %}
            <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                <div class="card-style-2 mb-30">
                    <div class="card-image">
                        {% set base64 = product.getBase64Image() %}
                        {% if base64 %}
                            <img src="data:image/jpeg;base64,{{ base64 }}" alt="Image" style="max-width: 100%; border-radius: 8px; margin-top: 15px;">
                        {% endif %}
                    </div>
                    <div class="card-content">
                        <h4>{{ product.name }}</h4>
                        <p>{{ product.description|length > 120 ? product.description|slice(0, 120) ~ '...' : product.description }}</p>
                        <form action="{{ path('aya_cart_add', {'id': product.product_id}) }}" method="post">
                            <button type="submit" class="btn btn-primary">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endfor %}

{% if groupedProducts is empty %}
    <p class="text-center">No products available.</p>
{% endif %}
