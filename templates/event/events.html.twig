{% extends 'base.html.twig' %}

{% block title %}Events Page
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ asset('css/eventcards.css') }}">
{% endblock %}

{% block content %}
	<header id="fh5co-header" class="fh5co-cover fh5co-cover-sm" role="banner" style="background-image:url('{{ asset('images/eventspage8.jpg') }}');">
		<div class="overlay"></div>
		<div class="fh5co-container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeIn">
							<h1>Events Page</h1>
							<h2>You can now create your events here freely.</h2>
							<p>
								<a href="{{ path('event_new') }}" class="btn btn-default btn-sm">Create Now</a>
								<a href="{{ path('booking_list') }}" class="btn btn-default btn-sm">Bookings</a>
							</p>

						</div>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="container mt-5 mb-5">
		<div class="row">
			{% for event in events %}
				<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
					<div class="event-card">
						<div class="event-card-image">
							{% if event.base64Image is defined %}
								<img src="data:image/jpeg;base64,{{ event.base64Image }}" alt="Event image">
							{% else %}
								<img src="{{ asset('images/default.jpg') }}" alt="Default image">
							{% endif %}
						</div>
						<div class="event-card-content">
							<h4>{{ event.name }}</h4>
							<p>{{ event.description|slice(0, 100) ~ '...' }}</p>
							<ul>
								<li>
									<i class="fa-solid fa-location-dot" style="color: #6b336e;"></i>
									<strong>City:</strong>
									{{ event.city }}</li>
								<li>
									<i class="fas fa-users me-1" style="color: #6b336e;"></i>
									<strong>Capacity:</strong>
									{{ event.capacity }}</li>
								<li>
									<i class="fas fa-calendar-alt me-1"style="color: #6b336e;"></i>
									<strong>Start:</strong>
									{{ event.startDate|date('d/m/Y H:i') }}</li>
								<li>
									<i class="fas fa-clock me-1"style="color: #6b336e;"></i>
									<strong>End:</strong>
									{{ event.endDate|date('d/m/Y H:i') }}</li>
							</ul>
							<!-- âœ… STATUT -->
							<p>
								<strong>
									<i class="fas fa-thumbtack me-1"></i>
									Status:</strong>
								{% if event.status == 'booked' %}
									<span class="event-status booked">
										<i class="fas fa-check-circle me-1"></i>
										Booked
									</span>
								{% else %}
									<span class="event-status not-booked">
										<i class="fas fa-times-circle me-1"></i>
										Not Booked
									</span>
								{% endif %}
							</p>
							<!-- Action Buttons -->
							<div class="event-card-actions">
								<button class="action-btn edit" title="Edit" onclick="window.location.href='{{ path('event_edit', {'id': event.idEvent}) }}'">
									<i class="fa-solid fa-pen" style="font-size: 14px;color: #cebec9;"></i>
								</button>
								<!-- Delete -->
								{{ include('event/delete_formEvent.html.twig', { 'event': event }) }}
								<button class="action-btn details" title="Details" onclick="window.location.href='{{ path('event_show', {'id': event.idEvent}) }}'">
									<i class="fa-solid fa-circle-info" style="font-size: 14px;color: #cebec9;"></i>
								</button>
							</div>


						</div>
					</div>
				</div>
			{% else %}
				<div class="col-12 text-center">
					<p>No events found.</p>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
